(function(a){a.isCrawlable=navigator.userAgent=="crawlable";a.fn.crawlable=function(l){if(!this.length){return this}var d=this;l.wait=typeof l.wait=="number"?l.wait:250;l.interval=typeof l.interval=="number"?l.interval:20;l.context=(typeof l.context=="string"&&!l.context.indexOf("<"))?"<div>"+l.context+"</div>":"<div></div>";var e=a(l.context);if(!e.length){throw new Error("Couldn't fetch the context.")}if(a.isCrawlable){d.html(e.html());d.on("app:load",function(){a("body").append('<div id="app-fully-loaded"></div>')})}else{var g=a.fn.init;d.on("app:load",function(){a.fn.init=g;d.html(e.children());e.remove()});a.fn.init=function(c,i){return new g(c,i,e)}}var k,f=l.wait,j=false;var h=function(c){if(!j){j=true;d.trigger("app:load");clearInterval(c)}};var b=setInterval(function(){if(a.active){if(k){clearTimeout(k)}k=setTimeout(function(){h(b)},l.wait)}else{if(f<=0){h(b)}}f-=l.interval},l.interval);return d}})(jQuery);
